onmessage=function(e){const t=e.data.pile,s=e.data.game,n=t.asset;n&&fetch(n).then((e=>e.json())).then((e=>{const a=n.substring(0,n.lastIndexOf("/")+1);e.content.forEach((e=>{e.hasOwnProperty("img")&&(e.img=a+e.img)})),e.id=e.contract+e.token_id,postMessage({pile:t,game:s,token:e})})),t.unpublished&&(t.test&&postMessage({pile:t,game:s,token:t}),t.edit&&postMessage({pile:t,game:s,token:t,edit:!0}))};